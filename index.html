<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1.0">
  <title>The Hidden Patterns of Literary Success: What 100,000 Books Tell Us About Reader Preferences</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Crimson+Text:ital,wght@0,400;0,600;1,400&family=Franklin+Gothic+Medium:ital,wght@0,400;0,500;1,400&display=swap" rel="stylesheet">
  <style>
    :root {
      --primary-font: 'Crimson Text', Georgia, serif;
      --headline-font: 'Franklin Gothic Medium', 'Arial Narrow', sans-serif;
      --accent-color: #d62728;
      --secondary-color: #2ca02c;
      --tertiary-color: #ff7f0e;
      --background: #fefefe;
      --text-dark: #1a1a1a;
      --text-medium: #444444;
      --text-light: #666666;
      --grid-color: #e8e8e8;
      --highlight-bg: #fff8dc;
    }

    body {
      font-family: var(--primary-font);
      background: var(--background);
      color: var(--text-dark);
      line-height: 1.6;
      margin: 0;
      padding: 0;
    }

    .container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 0 20px;
    }

    .hero {
      background: linear-gradient(135deg, #f8f9fa 0%, var(--highlight-bg) 100%);
      padding: 60px 0;
      margin-bottom: 40px;
      border-bottom: 3px solid var(--accent-color);
    }

    .headline {
      font-family: var(--headline-font);
      font-size: clamp(2.5rem, 5vw, 4rem);
      font-weight: 500;
      line-height: 1.1;
      margin-bottom: 20px;
      color: var(--text-dark);
      letter-spacing: -0.02em;
    }

    .subtitle {
      font-size: 1.5rem;
      color: var(--text-medium);
      font-weight: 400;
      margin-bottom: 30px;
      font-style: italic;
    }

    .byline {
      font-size: 1rem;
      color: var(--text-light);
      text-transform: uppercase;
      letter-spacing: 0.05em;
      margin-bottom: 10px;
    }

    .dateline {
      font-size: 0.9rem;
      color: var(--text-light);
    }

    .story-text {
      font-size: 1.125rem;
      line-height: 1.7;
      margin: 30px 0;
      max-width: 700px;
    }

    .story-text p {
      margin-bottom: 20px;
    }

    .story-text .lead {
      font-size: 1.3rem;
      font-weight: 600;
      color: var(--text-dark);
    }

    .chart-section {
      margin: 60px 0;
      background: white;
      border-radius: 8px;
      box-shadow: 0 2px 20px rgba(0,0,0,0.05);
      overflow: hidden;
    }

    .chart-header {
      padding: 30px 30px 20px;
      border-bottom: 1px solid var(--grid-color);
    }

    .chart-title {
      font-family: var(--headline-font);
      font-size: 1.8rem;
      font-weight: 500;
      margin-bottom: 10px;
      color: var(--text-dark);
    }

    .chart-subtitle {
      font-size: 1rem;
      color: var(--text-medium);
      line-height: 1.5;
    }

    .chart-container {
      padding: 20px 30px 30px;
    }

    svg {
      width: 100%;
      height: 450px;
    }

    .grid line {
      stroke: var(--grid-color);
      stroke-width: 0.5;
    }

    .axis text {
      font-family: var(--primary-font);
      font-size: 12px;
      fill: var(--text-medium);
    }

    .axis-label {
      font-family: var(--primary-font);
      font-size: 14px;
      font-weight: 600;
      fill: var(--text-dark);
    }

    .tooltip {
      position: absolute;
      pointer-events: none;
      background: var(--text-dark);
      color: white;
      padding: 8px 12px;
      border-radius: 6px;
      font-size: 0.9rem;
      font-family: var(--primary-font);
      box-shadow: 0 4px 12px rgba(0,0,0,0.15);
      max-width: 200px;
      line-height: 1.4;
    }

    .key-finding {
      background: var(--highlight-bg);
      border-left: 4px solid var(--accent-color);
      padding: 20px;
      margin: 30px 0;
      font-size: 1.1rem;
      font-style: italic;
    }

    .methodology {
      background: #f8f9fa;
      padding: 30px;
      margin: 40px 0;
      border-radius: 8px;
      font-size: 0.95rem;
      color: var(--text-medium);
    }

    .methodology h3 {
      font-family: var(--headline-font);
      margin-top: 0;
      color: var(--text-dark);
    }

    @media (max-width: 768px) {
      .chart-container {
        padding: 15px;
      }
      
      .chart-header {
        padding: 20px 15px;
      }
      
      svg {
        height: 300px;
      }
    }
  </style>
</head>

<body>
  <div class="hero">
    <div class="container">
      <div class="byline">Data Analysis</div>
      <div class="dateline">Published June 28, 2025</div>
      <h1 class="headline">The Hidden Patterns of Literary Success</h1>
      <p class="subtitle">What 100,000 books reveal about the mysterious relationship between length, buzz, and reader satisfaction</p>
    </div>
  </div>

  <div class="container">
    <div class="story-text">
      <p class="lead">In the age of infinite scrolling and shrinking attention spans, does book length still matter? Our analysis of 100,000 Goodreads reviews reveals surprising truths about what readers actually want.</p>
      
      <p>For decades, conventional publishing wisdom has held that readers prefer shorter books—quick reads that fit into busy lives. But data from the world's largest community of book lovers tells a different story, one that challenges everything we thought we knew about literary preferences in the digital age.</p>
    </div>
    <div id="status" style="text-align: center; padding: 40px; font-style: italic;">Loading data...</div>
    <div id="plots"></div>

    <div class="story-text">
      <div class="key-finding">
        <strong>Key Finding:</strong> Our analysis reveals that readers consistently reward depth over brevity—longer books with more detailed descriptions tend to receive higher ratings, defying the conventional wisdom of our attention-deficit age.
      </div>

      <p>The data tells three interconnected stories about what drives reader satisfaction in the digital age.</p>
    </div>

    <div class="methodology">
      <h3>About This Analysis</h3>
      <p>This analysis examines 100,000 books from Goodreads, the world's largest community of readers. We filtered outliers and focused on books with substantial reader engagement to understand the relationship between book characteristics and reader satisfaction. The smooth trend lines show local regression patterns that reveal underlying relationships in the data.</p>
      <p><strong>Data source:</strong> Goodreads community ratings and reviews, accessed 2025</p>
    </div>

    <footer style="text-align: center; padding: 40px 0; color: var(--text-light); border-top: 1px solid var(--grid-color); margin-top: 60px;">
      <p>Data visualization by Claude Code | Source: <a href="https://goodreads.com" style="color: var(--accent-color);">Goodreads</a></p>
    </footer>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/d3@7"></script>
  <script type="module">
    const status = document.getElementById('status')
    fetch('scatter_data.json').then(r => r.json()).then(d => {
      status.remove();
      init(d)
    }).catch(() => status.textContent = 'Error loading data—please check that scatter_data.json exists')

    const charts = [{
        x: d => d.pages,
        y: d => d.rating,
        xLabel: 'Book Length (Pages)',
        yLabel: 'Average Rating',
        title: 'The Length Paradox',
        subtitle: 'Contrary to popular belief, longer books tend to receive higher ratings from readers',
        color: '#d62728',
        finding: 'Books over 400 pages consistently outperform shorter works, suggesting readers value substantial narratives over quick reads.'
      },
      {
        x: d => d.blurb,
        y: d => d.rating,
        xLabel: 'Description Length (Characters)',
        yLabel: 'Average Rating',
        title: 'The Detail Dividend',
        subtitle: 'Books with longer, more detailed descriptions earn higher reader ratings',
        color: '#2ca02c',
        finding: 'Detailed descriptions signal quality and help readers find books that match their preferences, leading to higher satisfaction.'
      },
      {
        x: d => Math.log10(d.reviews),
        y: d => d.rating,
        xLabel: 'Reader Engagement (Log Scale)',
        yLabel: 'Average Rating',
        title: 'The Buzz Factor',
        subtitle: 'Popular books maintain quality—more reviews correlate with higher ratings',
        color: '#ff7f0e',
        finding: 'Books that generate significant discussion tend to be higher quality, creating a virtuous cycle of engagement and satisfaction.'
      }
    ]

    function init(data) {
      const box = document.getElementById('plots');
      box.innerHTML = ''
      
      charts.forEach(c => {
        const section = document.createElement('div');
        section.className = 'chart-section';
        section.innerHTML = `
          <div class="chart-header">
            <h2 class="chart-title">${c.title}</h2>
            <p class="chart-subtitle">${c.subtitle}</p>
          </div>
          <div class="chart-container">
            <svg></svg>
            <div class="key-finding" style="margin-top: 20px;">
              ${c.finding}
            </div>
          </div>
        `;
        box.appendChild(section);
        draw(section.querySelector('svg'), data, c)
      })
      
      window.addEventListener('resize', () => 
        box.querySelectorAll('svg').forEach((s, i) => draw(s, data, charts[i]))
      )
    }

    function draw(svg, data, cfg) {
      svg.innerHTML = '';
      const margin = {top: 20, right: 30, bottom: 60, left: 70}
      const width = svg.clientWidth - margin.left - margin.right
      const height = svg.clientHeight - margin.top - margin.bottom

      const x = d3.scaleLinear()
        .domain(d3.extent(data, cfg.x))
        .range([0, width])
        .nice()

      const y = d3.scaleLinear()
        .domain(d3.extent(data, cfg.y))
        .range([height, 0])
        .nice()

      const g = d3.select(svg)
        .append('g')
        .attr('transform', `translate(${margin.left},${margin.top})`)

      // Grid lines
      g.append('g')
        .attr('class', 'grid')
        .attr('transform', `translate(0,${height})`)
        .call(d3.axisBottom(x)
          .tickSize(-height)
          .tickFormat('')
        )

      g.append('g')
        .attr('class', 'grid')
        .call(d3.axisLeft(y)
          .tickSize(-width)
          .tickFormat('')
        )

      // Axes
      g.append('g')
        .attr('transform', `translate(0,${height})`)
        .call(d3.axisBottom(x).ticks(6))
        .append('text')
        .attr('class', 'axis-label')
        .attr('x', width / 2)
        .attr('y', 45)
        .style('text-anchor', 'middle')
        .text(cfg.xLabel)

      g.append('g')
        .call(d3.axisLeft(y).ticks(6))
        .append('text')
        .attr('class', 'axis-label')
        .attr('transform', 'rotate(-90)')
        .attr('y', -50)
        .attr('x', -height / 2)
        .style('text-anchor', 'middle')
        .text(cfg.yLabel)

      // Tooltip
      const tooltip = d3.select('body').selectAll('.tooltip')
        .data([null])
        .join('div')
        .attr('class', 'tooltip')
        .style('opacity', 0)

      // Data points
      g.selectAll('circle')
        .data(data.filter(d => cfg.x(d) != null && cfg.y(d) != null))
        .join('circle')
        .attr('cx', d => x(cfg.x(d)))
        .attr('cy', d => y(cfg.y(d)))
        .attr('r', 3)
        .attr('fill', cfg.color)
        .attr('opacity', 0.4)
        .on('mouseover', function(event, d) {
          d3.select(this)
            .transition()
            .duration(200)
            .attr('r', 5)
            .attr('opacity', 0.8)
          
          tooltip.transition()
            .duration(200)
            .style('opacity', .9)
          
          tooltip.html(`
            <strong>Rating:</strong> ${cfg.y(d).toFixed(2)}<br>
            <strong>${cfg.xLabel}:</strong> ${cfg.x(d).toFixed(0)}
          `)
            .style('left', (event.pageX + 10) + 'px')
            .style('top', (event.pageY - 28) + 'px')
        })
        .on('mouseout', function(d) {
          d3.select(this)
            .transition()
            .duration(200)
            .attr('r', 3)
            .attr('opacity', 0.4)
          
          tooltip.transition()
            .duration(500)
            .style('opacity', 0)
        })

      // Trend line
      const line = d3.line()
        .x(d => x(d[0]))
        .y(d => y(d[1]))
        .curve(d3.curveMonotoneX)

      const loessData = loess(data.map(cfg.x), data.map(cfg.y))
      
      g.append('path')
        .datum(loessData)
        .attr('fill', 'none')
        .attr('stroke', cfg.color)
        .attr('stroke-width', 3)
        .attr('stroke-opacity', 0.8)
        .attr('d', line)
    }

    function loess(x, y, bw = 0.3) {
      const n = x.length,
        r = Math.floor(bw * n),
        idx = d3.range(n).sort((a, b) => x[a] - x[b])
      x = idx.map(i => x[i]);
      y = idx.map(i => y[i]);
      const res = []
      for (let i = 0; i < n; i++) {
        const lo = Math.max(0, i - r),
          hi = Math.min(n - 1, i + r),
          x0 = x[i];
        let w = 0,
          sx = 0,
          sy = 0,
          sxx = 0,
          sxy = 0
        const slice = d3.range(lo, hi + 1),
          xS = slice.map(j => x[j]),
          yS = slice.map(j => y[j])
        const dist = Math.max(xS[xS.length - 1] - x0, x0 - xS[0]) || 1
        for (let j = 0; j < xS.length; j++) {
          const tmp = tricube(Math.abs(xS[j] - x0) / dist);
          w += tmp;
          sx += tmp * xS[j];
          sy += tmp * yS[j];
          sxx += tmp * xS[j] * xS[j];
          sxy += tmp * xS[j] * yS[j]
        }
        const denom = w * sxx - sx * sx,
          b = denom ? (w * sxy - sx * sy) / denom : 0,
          a = (sy - b * sx) / w;
        res.push([x0, a + b * x0])
      }
      return res
    }
    const tricube = t => {
      t = Math.abs(t);
      t = 1 - t * t * t;
      return t * t * t
    }

  </script>
</body>

</html>
